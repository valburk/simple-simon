<!DOCTYPE html>
<html>
	<head>
	    <title>Simple Simon</title>
	    <link rel="stylesheet" href="CSS/simon.css">
	    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">
	</head>
	<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	    <h1 id="title">Simple Simon</h1>
	    <h1 id="over"></h1>
	    <h2 id="subtitle">Click start to play!</h2>
	    <div id="box-red" class="box">1</div>
	    <div id="box-yellow" class="box">2</div>
	    <div id="box-green" class="box">3</div>
	    <div id="box-blue" class="box">4</div>
	    <button id="start"> Start</button>
	<script>
	// (function() {
    "use strict";
	var sequenceArray = [];
	var counter = 0;
	var userArray = [];


 	function addToSequence( ){
 		var num = (Math.floor(Math.random()* 4)+1);
 		sequenceArray.push(num);
 		console.log(sequenceArray);
 	}

 	function animateGame(){
 		for(var i = 0; i < sequenceArray.length; i++){
		 	if(sequenceArray[i] == 1){
		 		$("#box-red").animate({
		 			opacity: .5
		 		}, 1000, function(){
		 			$("#box-red").animate({opacity: 1}, 1000);
		 		})
		 	}else if(sequenceArray[i] == 2){
		 		$("#box-yellow").animate({
		 			opacity: .5
		 		}, 1000, function(){
		 			$("#box-yellow").animate({opacity: 1}, 1000);
		 		})
		 	}else if(sequenceArray[i] == 3){
		 		$("#box-green").animate({
		 			opacity: .5
		 		}, 1000, function(){
		 			$("#box-green").animate({opacity: 1}, 1000);
		 		})
		 	}else if(sequenceArray[i] == 4){
		 		$("#box-blue").animate({
		 			opacity: .5
		 		}, 1000, function(){
		 			$("#box-blue").animate({opacity: 1}, 1000);
		 		})
		 	}
		}
 	}

 	function checkUser(button){
		// $(".box").on("click", function(){
			// console.log($(button).html())
			var buttonClicked = $(button).html();
			if(userArray[counter] == sequenceArray[counter]){
				
	    		animateGame();
	    		counter++;
				// $(".box").off("click");
			}else{
				console.log("you are wrong");
				gameOver();
				// $(".box").off("click");
			}
			// if(check if sequence is complete and matches){
			// 	addToSequence();
			// }else{
				
			// }
			
				

		// })
	}

	function playerMove(){
		$('.box').click(function() {
			checkUser($(this));
	        userArray.push($(this).text());
	        console.log(userArray);
	    }); 
	}
 
	function start(){
	    $("#start").click(function(){
	    	sequenceArray = [];
	    	userArray = [];
	    	counter = 0;
	    	addToSequence();
	    	animateGame();
	    	playerMove();
	    	var rounds = document.getElementById('subtitle');
            rounds.innerHTML = "Round: #";
            var loser = document.getElementById('over');
           	loser.innerHTML = "";
	    	
		});
	}
	
	function gameOver(){
		sequenceArray = [];
	    userArray = [];
	    counter = 0;
	    console.log("Game Over");
	    var playAgain = document.getElementById('subtitle');
            playAgain.innerHTML = "Click Start to play Again!";
        var loser = document.getElementById('over');
           loser.innerHTML = "GAME OVER";
	}
	start();


    // })();
	</script>
	    
	</body>
</html>